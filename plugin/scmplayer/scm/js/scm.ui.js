define(["scm","knockout","underscore"],function(e,c,b){var d=c.observable("skins/tunes/skin.css"),a=location.host.match(/(localhost|scmplayer\.net)/);placement=c.observable("top"),showPlaylist=c.observable(false),display=c.computed(function(){return e.message()||e.current().title()}),showAd=c.computed(function(){return a&&showPlaylist()});timer=(function(){function f(g){g=parseInt(g);if(g<10){return"0"+g}else{return g}}return c.computed(function(){var g=e.position();var h=e.duration();return f(g/60)+":"+f(g%60)+"|"+f(h/60)+":"+f(h%60)})})(),togglePlaylist=function(){showPlaylist(!showPlaylist())};b.extend(e,{skin:d,placement:placement,showPlaylist:showPlaylist,togglePlaylist:togglePlaylist,display:display,timer:timer,showAd:showAd});e.config=function(f){b.extend(f,f.playback);if("skin" in f){e.skin(f.skin)}if("volume" in f){e.volume(parseInt(f.volume))}if("autoplay" in f){e.autoPlay(f.autoplay!="false"&&f.autoplay)}if("autostart" in f){e.autoPlay(f.autostart!="false"&&f.autostart)}if("shuffle" in f){e.isShuffle(f.shuffle!="false"&&f.shuffle)}if("repeat" in f){e.repeatMode(f.repeat)}if("placement" in f){e.placement(f.placement)}if("showplaylist" in f){e.showPlaylist(f.showplaylist!="false"&&f.showplaylist)}if("playlist" in f){e.loadPlaylist(f.playlist)}}});